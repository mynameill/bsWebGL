<!DOCTYPE html>
<html lang="ko">
<head>
	<title>svg파서 개발을 위한 초기 테스트</title>
	<meta name="keywords" content="redcamel, webgl, bsjs, bsWebGL" />
	<meta name="description" content="redcamel, webgl, bsjs, bsWebGL" />
	<meta charset="utf-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="viewport"
	      content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=0.5,target-densitydpi=medium-dpi" />
	<link rel="shortcut icon" href="http://redcamel.github.io/red/red/favicon/favicon.ico" type="image/x-icon">
	<style>body {
		margin: 0;
		padding: 0;
		font-size: 11px
	}</style>
	<script src="http://projectbs.github.io/bsJS/bsjs.0.5.js"></script>

</head>
<body>
<svg style="position:absolute;z-index:1" height="500" width="100%">
	<rect width="300" height="100" fill="#223344" />
	<path d="M350 0 L75 200 L225 200 L525 300" fill="pink" />
	<rect width="150" height="150" fill="#22f654"></rect>
	<rect x="200" y="200" width="150" height="150" fill="purple" opacity="0.5"></rect>
	<circle cx="50" cy="50" r="80" stroke="black" stroke-width="3" fill="blue" />
	<circle cx="150" cy="150" r="30" stroke="black" stroke-width="3" fill="rgb(0,100,125)" />
	<ellipse cx="240" cy="100" rx="220" ry="30" fill="#aa2244" />
	<ellipse cx="220" cy="70" rx="190" ry="20" fill="#bb2244" />
	<ellipse cx="210" cy="45" rx="170" ry="15" fill="rgb(0,100,125)" />
	<image xlink:href="../showcase/assets/t1.jpg" x="0" y="0" height="50px" width="50px" />
	<image xlink:href="../showcase/assets/t1.jpg" x="100" y="100" height="50px" width="50px" />
	<polygon points="200,10 250,190 160,210" fill="#cce244" opacity="0.5" />
	<polyline points="20,20 40,25 60,40 80,120 120,140 200,180" stroke="#ffee44" style="fill:none" />
	<line x1="0" y1="0" x2="200" y2="200" stroke="#cc2244" stroke-width="3" />
	<path d="M0 0 C200 200, 400 200, 500 100" stroke="#006666" fill="none" />

	<path d="M100 250 Q250 100 400 250" fill="blue" />
	<!--<path  fill="#e95520" d="M206.7 3.85 L206.8 6.65 206.7 9.55 215.2 4.95 Q212.5 8.35 207.5 16.7 L198.4 32.15 186.0 54.25 Q177.45 69.8 174.35 73.95 170.7 78.95 158.7 85.1 148.3 90.4 137.6 93.8 139.35 117.1 129.25 129.6 123.1 137.25 107.95 142.2 94.25 146.7 86.6 145.5 75.75 143.75 68.1 137.85 59.7 131.35 59.15 122.5 58.75 116.85 57.6 110.2 56.6 104.3 57.35 94.9 48.4 90.5 37.3 82.85 23.7 73.4 19.5 67.0 15.05 60.2 8.95 38.05 3.25 17.55 0.75 1.25 1.5 2.85 3.45 5.0 L6.55 7.9 6.45 1.85 Q9.25 6.75 15.85 13.4 21.0 18.65 25.65 22.2 37.4 31.45 43.75 38.3 L43.5 34.3 49.65 40.45 Q49.8 36.3 50.05 34.3 54.0 40.8 58.55 52.2 62.3 61.5 64.6 69.1 L121.25 68.6 Q126.3 57.7 132.55 49.1 137.0 43.0 141.5 38.75 144.05 36.35 147.05 32.2 150.2 27.8 151.75 24.3 L152.05 31.2 Q153.55 29.4 156.1 27.55 L155.3 33.1 Q162.1 26.15 175.4 20.6 183.5 17.2 192.35 14.9 196.2 13.9 200.75 10.05 204.3 7.1 206.7 3.85" />-->
	<path stroke="blue"
	      d="M208.74069 283.4675 C198.20591 293.33532 214.13161 303.98795 213.55045 309.12348 C212.31784 320.01559 181.5497 283.77299 162.83354 279.3553 C156.68598 277.90425 144.32143 282.06818 145.68464 284.55575 C147.04744 287.04308 159.22059 281.72452 164.64033 285.50473 C167.62919 287.58941 146.76386 288.07601 147.85253 294.18935 C148.55332 298.12465 166.5567 290.8771 165.24441 293.40133 C163.9318 295.92559 146.24907 301.03238 150.9333 304.44536 C153.83216 306.55753 159.72785 300.0254 170.34849 302.27128 C181.86662 304.70696 199.79386 318.21858 205.62412 322.42747 C216.74436 330.45586 187.76766 326.3075 181.30179 333.72503 C178.88081 336.50237 170.94935 344.31748 174.66727 344.80802 C178.3849 345.29881 192.1733 331.23759 193.14413 334.02431 C194.39652 337.6193 177.05656 347.89056 181.11836 352.95254 C182.86376 355.12773 191.32167 340.91737 196.4577 342.19538 C199.42538 342.93383 180.25525 363.56804 185.07681 363.31716 C188.75405 363.12583 201.60602 347.58859 212.16247 341.27929 C222.71862 334.96972 228.88148 335.01885 230.90989 338.79935 C232.96973 342.63738 220.0849 352.43419 217.36457 361.21247 C214.64414 369.99129 221.92549 370.05951 220.01481 373.89752 C218.59106 376.75702 216.77495 379.56534 212.26047 384.29357 C204.55318 392.36471 210.97109 420.04498 206.66579 422.25279 C201.62173 424.83938 177.60942 412.8228 172.9005 416.81637 C168.19125 420.8102 172.46581 424.04845 168.77797 427.68921 C165.08987 431.32996 161.15682 426.73409 158.17724 431.3134 C155.19771 435.89271 161.82171 471.22487 164.85179 471.65734 C167.88188 472.0896 170.88779 466.57502 172.9005 461.7381 C174.91289 456.90116 171.52473 447.95587 176.63038 446.192 C181.73568 444.42818 184.48905 453.98288 192.43317 453.05908 C200.38039 452.13477 209.21844 450.88054 217.75715 442.94915 C225.14785 436.08439 226.78931 427.56601 231.40084 427.40307 C233.80772 427.31804 238.03987 440.13905 241.60892 454.58493 C245.17806 469.03103 224.09339 471.47177 240.8237 500.74662 C245.19904 508.40232 251.60819 498.7768 253.38754 505.32465 C254.94321 511.04974 249.43587 520.12996 254.46708 523.54134 C261.99881 528.64836 280.34132 526.44868 289.21393 524.49518 C298.08684 522.54142 294.5463 516.4882 289.90117 515.72069 C276.38847 513.48793 259.67635 503.71456 261.92683 497.88534 C263.05164 494.97163 270.48533 509.26756 271.05542 479.57345 C271.60792 450.78558 277.00567 434.65377 257.31375 417.29342 C248.75397 409.74719 249.42272 414.36011 248.67609 406.039 C247.9292 397.71814 248.64057 386.89545 252.50397 384.48424 C257.27981 381.50333 282.4522 394.26446 288.527 394.59391 C294.20129 394.90161 297.82267 392.29622 299.91297 391.25583 C307.06555 387.69655 311.40796 372.5621 311.98587 373.70686 C312.78334 375.28465 315.07342 377.52607 316.30465 377.99876 C316.8578 378.21109 312.82828 386.51691 313.75264 388.39457 C315.43711 391.81613 320.05092 389.40035 323.76449 383.1488 C324.69138 381.58833 326.14625 380.16918 327.2 379.90621 C329.12008 379.42687 337.36355 382.17742 338.78229 383.81653 C342.4472 388.05117 353.21094 384.97834 359.29651 386.58234 C365.38218 388.18685 364.72667 393.43964 378.04426 398.5997 C381.19867 399.82191 410.21877 426.09641 411.12243 426.64017 C423.23492 433.9242 428.83678 440.04716 429.87018 445.23816 C430.65477 449.18262 437.44194 452.88608 443.80816 449.24397 C446.26652 447.83753 445.5957 443.55808 442.7283 441.90012 C441.00925 440.90657 437.98798 438.38387 435.85745 436.17756 C434.52665 434.79938 423.14067 421.31474 421.23252 420.15468 C419.32443 418.99441 411.19152 414.62104 411.71132 413.76444 C411.94344 413.38183 404.3216 404.30773 405.72409 403.17771 C408.43751 400.99127 411.10074 400.21436 415.93219 406.32511 C417.48252 408.28627 420.83769 410.86726 423.19565 412.14314 C425.55357 413.419 433.77906 417.15035 439.29303 421.20374 C441.39085 422.74613 462.70238 444.35231 464.81331 444.18912 C466.7407 444.04017 468.95093 441.57158 469.03413 439.80177 C469.19153 436.45335 438.09729 407.15398 436.93732 405.94354 C433.51085 402.36949 430.91924 399.02659 430.85174 398.02744 C430.63909 394.89556 431.38037 392.17253 433.10913 389.53906 C434.97802 386.69257 436.84969 385.9131 435.56314 374.85136 C433.19142 354.45972 443.31787 350.74286 442.53199 343.09125 C441.79828 335.94748 448.56706 325.65938 448.61762 322.01331 C448.64523 320.03586 452.78756 305.61086 451.56227 304.46432 C449.82847 302.84227 441.3045 313.62142 439.78369 314.95556 C436.66065 317.69592 434.56751 317.62083 431.83325 314.66944 C430.96638 313.73366 424.75479 303.26304 423.88257 301.98464 C423.01003 300.70598 423.86505 298.19444 421.62517 297.5018 C416.7041 295.98005 421.8808 310.85102 421.62517 311.52204 C420.84965 313.55651 414.73483 316.01454 408.66872 316.863 C403.02409 317.65265 400.35491 319.13522 400.32538 321.25036 C400.28929 323.84335 403.54707 327.18243 401.89587 330.21553 C400.7689 332.28562 400.73712 335.39637 402.09215 335.55674 C402.58623 335.61503 412.04083 341.80113 412.20226 343.85418 C412.88385 352.53625 385.29804 348.8257 376.57178 344.71256 C373.96787 343.48521 349.314 325.6057 335.54303 330.88324 C327.80512 333.8487 303.79956 315.94182 299.91297 295.78505 C298.3831 287.85073 294.4166 281.84704 292.84581 282.24185 C289.58139 283.06205 296.62595 303.36532 297.06627 304.94112 C302.21717 323.37489 323.4114 338.58855 324.45168 338.60866 C327.60078 338.66927 328.73625 340.11289 326.61107 341.46995 C321.2652 344.88286 319.44436 365.413 319.1513 365.40918 C318.85797 365.40535 311.26658 353.14083 306.98012 356.15764 C306.16973 356.72787 305.34242 360.851 303.93714 368.55658 C303.65602 370.09794 300.40786 378.41117 300.30558 375.04204 C300.11023 368.60691 293.76234 366.49386 291.66795 367.41206 C288.31687 368.8814 289.7931 375.86095 283.32464 375.1375 C276.8558 374.41404 262.47529 368.05052 265.75502 364.55079 C269.03485 361.05108 278.68686 362.33317 285.87667 356.44378 C293.06649 350.55437 296.57947 346.38299 294.51427 340.99316 C292.4491 335.60332 283.39154 331.32795 282.3431 336.98737 C280.88222 344.87088 274.14484 335.94417 274.49067 346.71544 C274.62257 350.82992 266.66282 350.74593 262.90839 344.33121 C257.88694 335.75148 251.80364 333.48704 248.87239 325.2087 C248.24606 323.43985 248.95632 321.2198 251.53625 318.56569 C254.98734 315.01537 260.70346 311.86411 256.2477 306.35768 C251.25388 300.18609 254.70577 296.70546 249.6715 295.67576 C246.62505 295.05234 244.607 288.58825 247.21745 286.99648 C249.41673 285.6552 262.13289 275.30394 258.21079 274.88391 C254.28902 274.46365 241.67081 277.29538 237.69655 278.41266 C234.91967 279.19314 235.11748 271.47635 229.94219 270.30589 C225.72714 269.35261 214.39156 278.17466 208.74069 283.4675 Z"
			/>
</svg>

<script>
	bs.debug(0)
	bs(function () {
		bs.require(function () {
			bs.GL.init('#glCanvas', '../shaders.js', init)
			function init() {
				bs.GL.controller.S('distance', 1000)
				//파서테스트
				//svg파서 개발을 위한 초기 테스트
				bs.GL['parserSVG'] = (function () {
					var f0, f1, f2, colorNamed = {aliceblue: '#F0F8FF', antiquewhite: '#FAEBD7', aqua: '#00FFFF', aquamarine: '#7FFFD4', azure: '#F0FFFF', beige: '#F5F5DC', bisque: '#FFE4C4', black: '#000000', blanchedalmond: '#FFEBCD', blue: '#0000FF', blueviolet: '#8A2BE2', brown: '#A52A2A', burlywood: '#DEB887', cadetblue: '#5F9EA0', chartreuse: '#7FFF00', chocolate: '#D2691E', coral: '#FF7F50', cornflowerblue: '#6495ED', cornsilk: '#FFF8DC', crimson: '#DC143C', cyan: '#00FFFF', darkblue: '#00008B', darkcyan: '#008B8B', darkgoldenrod: '#B8860B', darkgray: '#A9A9A9', darkgrey: '#A9A9A9', darkgreen: '#006400', darkkhaki: '#BDB76B', darkmagenta: '#8B008B', darkolivegreen: '#556B2F', darkorange: '#FF8C00', darkorchid: '#9932CC', darkred: '#8B0000', darksalmon: '#E9967A', darkseagreen: '#8FBC8F', darkslateblue: '#483D8B', darkslategray: '#2F4F4F', darkslategrey: '#2F4F4F', darkturquoise: '#00CED1', darkviolet: '#9400D3', deeppink: '#FF1493', deepskyblue: '#00BFFF', dimgray: '#696969', dimgrey: '#696969', dodgerblue: '#1E90FF', firebrick: '#B22222', floralwhite: '#FFFAF0', forestgreen: '#228B22', fuchsia: '#FF00FF', gainsboro: '#DCDCDC', ghostwhite: '#F8F8FF', gold: '#FFD700', goldenrod: '#DAA520', gray: '#808080', grey: '#808080', green: '#008000', greenyellow: '#ADFF2F', honeydew: '#F0FFF0', hotpink: '#FF69B4', indianred: '#CD5C5C', indigo: '#4B0082', ivory: '#FFFFF0', khaki: '#F0E68C', lavender: '#E6E6FA', lavenderblush: '#FFF0F5', lawngreen: '#7CFC00', lemonchiffon: '#FFFACD', lightblue: '#ADD8E6', lightcoral: '#F08080', lightcyan: '#E0FFFF', lightgoldenrodyellow: '#FAFAD2', lightgray: '#D3D3D3', lightgrey: '#D3D3D3', lightgreen: '#90EE90', lightpink: '#FFB6C1', lightsalmon: '#FFA07A', lightseagreen: '#20B2AA', lightskyblue: '#87CEFA', lightslategray: '#778899', lightslategrey: '#778899', lightsteelblue: '#B0C4DE', lightyellow: '#FFFFE0', lime: '#00FF00', limegreen: '#32CD32', linen: '#FAF0E6', magenta: '#FF00FF', maroon: '#800000', mediumaquamarine: '#66CDAA', mediumblue: '#0000CD', mediumorchid: '#BA55D3', mediumpurple: '#9370D8', mediumseagreen: '#3CB371', mediumslateblue: '#7B68EE', mediumspringgreen: '#00FA9A', mediumturquoise: '#48D1CC', mediumvioletred: '#C71585', midnightblue: '#191970', mintcream: '#F5FFFA', mistyrose: '#FFE4E1', moccasin: '#FFE4B5', navajowhite: '#FFDEAD', navy: '#000080', oldlace: '#FDF5E6', olive: '#808000', olivedrab: '#6B8E23', orange: '#FFA500', orangered: '#FF4500', orchid: '#DA70D6', palegoldenrod: '#EEE8AA', palegreen: '#98FB98', paleturquoise: '#AFEEEE', palevioletred: '#D87093', papayawhip: '#FFEFD5', peachpuff: '#FFDAB9', peru: '#CD853F', pink: '#FFC0CB', plum: '#DDA0DD', powderblue: '#B0E0E6', purple: '#800080', rebeccapurple: '#663399', red: '#FF0000', rosybrown: '#BC8F8F', royalblue: '#4169E1', saddlebrown: '#8B4513', salmon: '#FA8072', sandybrown: '#F4A460', seagreen: '#2E8B57', seashell: '#FFF5EE', sienna: '#A0522D', silver: '#C0C0C0', skyblue: '#87CEEB', slateblue: '#6A5ACD', slategray: '#708090', slategrey: '#708090', snow: '#FFFAFA', springgreen: '#00FF7F', steelblue: '#4682B4', tan: '#D2B48C', teal: '#008080', thistle: '#D8BFD8', tomato: '#FF6347', turquoise: '#40E0D0', violet: '#EE82EE', wheat: '#F5DEB3', white: '#FFFFFF', whitesmoke: '#F5F5F5', yellow: '#FFFF00', yellowgreen: '#9ACD32"'};

					function rgbToHex() {
						var r, g, b;
						f2 = (f2 = arguments[0]).substr(4, f2.length - 5).split(','), r = +f2[0], g = +f2[1], b = +f2[2]
						return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
					}

					function checkColor() {
						if (f0 = arguments[0]) f0 = (f1 = f0.charAt(0)) == '#' ? f0 : f0.indexOf('rgb') > -1 ? rgbToHex(f0) : colorNamed[f0]
						else f0 = '#fff'
						// TODO 스타일 해석도해야되는구나..
						return f0
					}

					return function (svg) {
						var etc = '', r1 = /^[a-z]|[A-Z]/
						var i, j = 0, k, k2, t0 = svg.childNodes, len = t0.length, len2, svgChild = [], type, t1, t2, t3, t4, t4p, t5
						for (i = 0; i < len; i++) (t0[i].nodeType != 3 && t0[i].nodeType != 8) ? svgChild.push(t0[i]) : 0
						var container = bs.GL.Mesh('rect').S('material', '#eee')
						var hasC = 0
						i = svgChild.length
						while (i--) {
							var vs = [], is = [], mesh
							t1 = svgChild[j++]
							type = t1.tagName
							if (type == 'rect' || type == 'image') {
								etc = '', mesh = bs.GL.Mesh('rect').S(
										'pivotX', t1.width.baseVal.value / 2, 'pivotY', -t1.height.baseVal.value / 2,
										'x', t1.getAttribute('x'), 'y', -t1.getAttribute('y'),
										'scaleX', t1.width.baseVal.value, 'scaleY', t1.height.baseVal.value
								)
							} else if (type == 'ellipse' || type == 'circle') {
								etc = '', mesh = bs.GL.Mesh('circle').S(
										'x', t1.getAttribute('cx'), 'y', -t1.getAttribute('cy'),
										'scaleX', t1.getAttribute(type == 'ellipse' ? 'rx' : 'r') * 2, 'scaleY', t1.getAttribute(type == 'ellipse' ? 'ry' : 'r') * 2
								)
							} else if (type == 'polygon' || type == 'polyline') {
								etc = 'points', t2 = t1.getAttribute('points').split(' ')
								for (k = 0, len = t2.length; k < len; k++) t3 = t2[k].split(','), vs.push(t3[0]), vs.push(-t3[1]), vs.push(0)
							} else if (type == 'line') {
								var _x1 = t1.getAttribute('x1'), _x2 = t1.getAttribute('x2'), _y1 = t1.getAttribute('y1'), _y2 = t1.getAttribute('y2');
								etc = _x1 + _y1 + _x2 + _y2, vs.push(_x1), vs.push(-_y1), vs.push(0), vs.push(_x2), vs.push(-_y2), vs.push(0)
							} else if (type == 'path') {
								//TODO 공포의 베지어 패스는 나중에 -_-;;;
								var chunks = makeChunk(t1.getAttribute('d')), action, divideNum = 15
								etc = 'd', t2 = t1.getAttribute('d').split(' ')
								hasC = 0
								for (k = 0, len = chunks.length; k < len; k++) {
									t4 = chunks[k], t4p = t4.point
									action = t4.key.toUpperCase()
									if (action == 'C') {
										hasC = 1
										var result = [], cp = [
											{x: chunks[k - 1].point[chunks[k - 1].point.length - 2], y: chunks[k - 1].point[chunks[k - 1].point.length - 1]},
											{x: t4p[0], y: t4p[1]},
											{x: t4p[2], y: t4p[3]},
											{x: t4p[4], y: t4p[5]}
										]
										for (k2 = 0; k2 < divideNum; k2++) result[k2] = cubicBezier(cp, k2 * 1.0 / ( divideNum - 1 ));
										for (k2 = 0, len2 = result.length; k2 < len2; k2++) t5 = result[k2], vs.push(t5[0]), vs.push(-t5[1]), vs.push(t5[2])
									}else if (action == 'Q') {
										for (k2 = 0; k2 < Math.ceil(t4p.length); k2+=4){
											var start = k2==0 ? {x: chunks[k - 1].point[chunks[k - 1].point.length - 2], y: chunks[k - 1].point[chunks[k - 1].point.length - 1]} : 	{x: t4p[k2], y: t4p[k2+1]}
											var ctl = 	{x: t4p[k2+2], y: t4p[k2+3]}
											var anchor = {x: t4p[k2+4], y: t4p[k2+5]}
											curved(start,ctl,anchor)
										}
										console.log(vs)
										function curved(s,c,a){
											var anchorX, startX, ctlX, anchorY, startY, ctlY;
											anchorX = a.x,anchorY = a.y,startX = s.x,startY= s.y,ctlX= c.x,ctlY=c.y
											var divide = 30
											for (var i2 = 0; i2 <= divide; i2++) {
												var x = startX * (1 - i2 / divide) * (1 - i2 / divide) + ctlX * 2 * i2 / divide * (1 - i2 / divide) + anchorX * i2 / divide * i2 / divide;
												var y = startY * (1 - i2 / divide) * (1 - i2 / divide) + ctlY * 2 * i2 / divide * (1 - i2 / divide) + anchorY * i2 / divide * i2 / divide;
												vs.push(x), vs.push(-y), vs.push(0)
											}
										}
									}
									else {
										for (k2 = 0, len2 = t4p.length; k2 < len2; k2++) {
											if (action == 'M' || action == 'L') vs.push((k2 % 2 == 1 ? -1 : 1) * t4p[k2]), k2 == chunks[k].point.length-1 ? vs.push(0) : k2%2==1 ? vs.push(0) : 0
										}
									}
								}
							}
							if (type != 'rect' && type != 'image' && type != 'circle' && type != 'ellipse') {
								var name = type + (etc == '' ? '' : t1.getAttribute(etc)), tAlpha;
								bs.GL.makeBufferSet(name, vs, is, []),
										mesh = bs.GL.Mesh(name).S('zSort', 0, '<', container, 'alpha', (tAlpha = t1.getAttribute('opacity')) ? tAlpha : 1),
												type == 'path' ? (hasC ? mesh.S('renderMode', 'LINE_STRIP', 'material', checkColor(t1.getAttribute('stroke'))) : mesh.S('renderMode', 'TRIANGLE_FAN', 'material', checkColor(t1.getAttribute('fill')))) :
												type == 'polyline' ? mesh.S('renderMode', 'LINE_STRIP', 'material', checkColor(t1.getAttribute('stroke'))) :
												type == 'polygon' ? mesh.S('material', checkColor(t1.getAttribute('fill'))) :
												type == 'line' ? mesh.S('renderMode', 'LINES', 'material', checkColor(t1.getAttribute('stroke'))) : 0
							} else mesh.S('material', type == 'image' ? t1.getAttribute('xlink:href') + ',B' : checkColor(t1.getAttribute('fill')), 'zSort', 0, '<', container, 'alpha', (tAlpha = t1.getAttribute('opacity')) ? tAlpha : 1)
						}

						function cubicBezier(p, t) {
							console.log(p[0])
							var ax, bx, cx, ay, by, cy;
							var tS, tC;
							var result = [];
							/* 다항식 계수를 계산한다 */
							cx = 3.0 * (p[1].x - p[0].x), bx = 3.0 * (p[2].x - p[1].x) - cx, ax = p[3].x - p[0].x - cx - bx,
									cy = 3.0 * (p[1].y - p[0].y), by = 3.0 * (p[2].y - p[1].y) - cy, ay = p[3].y - p[0].y - cy - by,
								/* 매개변수 값 t에서 곡선 점을 계산한다 */
									tS = t * t, tC = tS * t,
									result.push((ax * tC) + (bx * tS) + (cx * t) + p[0].x),
									result.push((ay * tC) + (by * tS) + (cy * t) + p[0].y),
									result.push(0)
							return result;
						}

						function makeChunk() {
							var t1 = arguments[0], t2, t3, r = /[a-z][^a-z]*/ig, trim = /^\s*|\s*$/g, i, j, len, len2;
							var source = t1.match(r), chunk, chunks = [];
							for (i = 0, len = source.length; i < len; i++) {
								t2 = source[i].replace(trim, '').split(' '), t3 = {point: []}
								for (j = 0, len2 = t2.length; j < len2; j++) chunk = t2[j].replace(',', ''), j == 0 ? (t3.key = chunk.charAt(0), t3.point.push(+chunk.substring(1, chunk.length))) : t3.point.push(+chunk)
								chunks.push(t3)
							}
							return chunks
						}

						return container
					}
				})();
				//////////////////////////////////////////////////////////
				//////////////////////////////////////////////////////////
				var svgRect = bs.Dom('svg')[0]
				bs.GL.parserSVG(svgRect).S('<', bs.GL)
				//////////////////////////////////////////////////////////
				//////////////////////////////////////////////////////////

				var time = 0, ms = Math.sin, mc = Math.cos
				bs.ANI.ani({
					ANI: function () {
						time += 0.003
						var list = bs.GL.S('children'), i = list.length, t0, t1, j
						while (i--) {
							t0 = list[i]
							j = t0.children.length
//							t0.rotationZ += 0.001 * 15
//							while (j--) t1 = t0.children[j],t1.rotationZ += 0.001 * 15
						}
					}
				})
			}
		}, '../gl.js')

	})
</script>
</body>
</html>
