<!DOCTYPE html>
<html>
<head>
	<title>001_디텍팅_심화</title>
	<meta name="keywords" content="redcamel, webgl, bsjs, bsWebGL" />
	<meta name="description" content="redcamel, webgl, bsjs, bsWebGL" />
	<meta charset="utf-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<!--<meta name="viewport"-->
	<!--content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=0.5,target-densitydpi=medium-dpi" />-->
	<link rel="shortcut icon" href="http://redcamel.github.io/red/red/favicon/favicon.ico" type="image/x-icon">
	<style>body {
		margin: 0;
		padding: 0;
		font-size: 11px
	}</style>
	<script src="http://projectbs.github.io/bsJS/bsjs.0.5.js"></script>
</head>
<body>

<script>
	bs( function() {

		bs.require( function() {
			bs.GL.init( '#glCanvas', '../shaders.js', init )
			function init() {
				var time = 0, ms = Math.sin, mc = Math.cos
//				bs.ANI.ani( {
//					ANI: function() {
//						time += 0.02, bs.GL.directionalLight.x = Math.sin( time ) == 0 ? 0.01 : ms( time ), bs.GL.directionalLight.y = mc( time ) == 0 ? 0.01 : mc( time ), bs.GL.directionalLight.z = -1
//					}
//				} )
				var skyMap = bs.GL.Material( 'sky' ).S( 'src', ["assets/environ/right.jpg", "assets/environ/left.jpg", "assets/environ/bottom.jpg", "assets/environ/top.jpg", "assets/environ/front.jpg", "assets/environ/back.jpg"] )
				bs.GL.S( 'skybox', bs.GL.SkyBox().S( 'material', skyMap ) )
//				bs.GL.backgroundColor('#000000')
				bs.GL.controller.distance = 1500
				bs.GL.directionalLight.S('intensity',0.5)
				bs.GL.ambientLight.S('color','#666')

				// src, type, callback
				bs.GL.parserOBJ( 'assets/obj/frame.obj', 'frame', function() {



					var list = 'frame_room1_1,frame_room1_2,frame_room2_1,frame_room3_1,sofa,table1,table2,table3,table4,table5,tv,coutain,coutain2,coutain3,coutain_top,obj1,artwall,artwall2,k1,bed1_1,bed1_2,bed1_3,bed1_4,bed1_5,bed1_6,bed1_7,bed2_1,bed2_2,bed2_3,bed3_1,bed3_2,bed3_3,bed3_4,bed3_5,bed3_6,floor1,floor2,floor3,floor4'.split( ',' )
					var len = list.length
					while( len-- ){
						(function() {
							var str = list[len]
							bs.GL.parserOBJ( 'assets/obj/'+str + '.obj', str, function() {
								bs.GL.Mesh( str ).S( '<', bs.GL, 'material', 'assets/' + str + '.jpg,BL' )

							} )
						})()
					}

					setTimeout( function() {
						bs.GL.parserOBJ( 'assets/obj/window.obj', 'window', function() {
							bs.GL.Mesh( 'window' ).S( '<', bs.GL, 'material', '#fff', 'alpha', 0.1 )

						} )
						bs.GL.parserOBJ( 'assets/obj/winFrame.obj', 'winFrame', function() {
							bs.GL.Mesh( 'winFrame' ).S( '<', bs.GL, 'material', '#fff, L' )

						} )
						bs.GL.Mesh( 'frame' ).S( '<', bs.GL, 'material', 'assets/t3.jpg,BL' )

					}, 1000 )
				} )

			}
		}, '../gl.js' )

	} )
</script>
</body>
</html>