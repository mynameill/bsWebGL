<!DOCTYPE html>
<html lang="ko">
<head>
    <title>Normal Material Draft Demo</title>
    <meta name="keywords" content="redcamel, webgl, bsjs"/>
    <meta name="description" content="redcamel, webgl, bsjs"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <link rel="shortcut icon" href="http://redcamel.github.io/red/red/favicon/favicon.ico" type="image/x-icon">
    <style>
        body { margin: 0; padding: 0; font-size: 8px; overflow: hidden }

        p, li, div, b {
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -o-user-select: none;
            user-select: none;
        }
    </style>
    <script src="http://projectbs.github.io/bsJS/bsjs.0.5.js"></script>
</head>
<body>
<canvas id="glCanvas" width="1" height="1" style="position:absolute"></canvas>
<script>
    bs.debug(0), bs.repository('./');
    bs(function(){
        bs.require(function(data){
            bs.GL=data.GL
            bs.js(function(){
                var BGL=bs.GL, i
                if(BGL.init('glCanvas')) inits()
                else console.log('초기화 실패')
                function inits(){
                    var map=bs.GL.Material('sky').S('urls', ["assets/environ/right.jpg", "assets/environ/left.jpg", "assets/environ/bottom.jpg", "assets/environ/top.jpg", "assets/environ/front.jpg", "assets/environ/back.jpg"])
                    bs.GL.S('skybox', bs.GL.SkyBox().S('material', map))
                    bs.GL.controller.S('distance', 50)

                    var m1=bs.GL.Material('bitmapLight').S('diffuse', 'assets/t3.jpg', 'normal', 'assets/normal/normal.jpg')
                    var m2=bs.GL.Material('bitmapLight').S('diffuse', 'assets/t3.jpg', 'normal', 'assets/normal/normal2.png')
                    var m3=bs.GL.Material('bitmapLight').S('diffuse', 'assets/t3.jpg', 'normal', 'assets/normal/normal3.png')
                    var m4=bs.GL.Material('bitmapLight').S('diffuse', 'assets/t3.jpg', 'normal', 'assets/normal/normal4.jpg')
                    var m5=bs.GL.Material('bitmapLight').S('diffuse', 'assets/t3.jpg', 'normal', 'assets/normal/normal5.jpg')
                    var m6=bs.GL.Material('bitmapLight').S('diffuse', 'assets/t3.jpg')
                    var maps=[m1, m2, m3, m4, m5, m6, m1, m2, m3, m4, m5, m6]
                    var i=6, mesh, gap, s=5
                    while(i--){
                        gap=bs.GL.mobile ? 300 : 750
                        mesh=BGL.Mesh('sphere')
                        mesh.S('name', mesh.geoType+i, 'x', Math.sin(i*360/6*Math.PI/180)*15, 'y', Math.cos(i*360/6*Math.PI/180)*15, 'scaleX', s, 'scaleY', s, 'scaleZ', s, 'material', maps[i], '<', 'root', 'mouseup', function(){
                            console.log(this.name, 'mouseup')
                            this.S('alpha', 1)
                        }, 'mouseover', function(){
                            console.log(this.name, 'mouseover')
                            this.S('alpha', 0.5)
                        }, 'mouseout', function(){
                            console.log(this.name, 'mouseout')
                            this.S('alpha', 1)
                        }, 'mousedown', function(){
                            console.log(this.name, 'mousedown')
                            this.S('alpha', 0.1)
                        }, 'mousemove', function(){
                            console.log(this.name, 'mousemove')
                        })
                    }
                    var time=0
                    bs.ANI.ani({
                        ANI:function(){
                            time+=0.01
                            var list=bs.GL.S('children'),i=list.length, t0
                            while(i--) t0=list[i], t0.rotationX+=.01, t0.rotationY+=.01, t0.rotationZ+=.01
                            bs.GL.directionalLight.direction=[Math.sin(time) == 0 ? 0.01 : Math.sin(time*1), Math.cos(time) == 0 ? 0.01 : Math.cos(time*1), -1]
                        }
                    })
                }
            }, 'shaders.js')
        }, 'gl.js')
    })
</script>
</body>
</html>
